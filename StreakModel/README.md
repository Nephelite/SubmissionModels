# README for Running "Tennis Analytics Using Process Analysis Toolkit (PAT) on Streak Model"

## Introduction
This README guides you through the process of running the "Tennis Analytics Using Process Analysis Toolkit (PAT) on Streak Model" Jupyter Notebook. This notebook focuses on analyzing tennis data and applying a streak model using PAT.

## Prerequisites
Before running the notebook, ensure you have the following:
- Python 3 (latest version)
- Jupyter Notebook or JupyterLab
- `tennisabstract-v2-combined.csv` file, placed in the root directory of the `tennis_examples` folder

## Installation
1. **Install Python**: Download and install the latest version of Python 3 from [python.org](https://www.python.org/).
2. **Install Jupyter**: Run `pip install notebook` to install Jupyter Notebook.
3. **Download Required Files**: Download `tennis_examples.zip` from the provided Google Drive link and extract it to your desired location. Ensure that the `tennisabstract-v2-combined.csv` file is inside the root directory of the `tennis_examples` folder.

## Preliminary Steps:
1. Edit the areas in `Generate_CSV.py` labelled with TODO with the correct file paths.
2. Edit the number of jobs (n_jobs) in `Generate_PCSP.ipynb` in the line under the TODO comment.

## Steps to use the Streak Model:
1. Copy `tennisabstract-v2-combined.csv` into this directory. The file is too big, so we excluded this file for convenience.
The betting folder is smaller, so we included it. The betting folder is unchanged from the given model.

2. Run all the cells in `Generate_PCSP.ipynb`, in sequential order. 
Note: Adjust the number of parallel processes according to the power of your computer. 
WARNING: There is a high likelihood of the .ipynb causing Jupyter kernel to die. 
Rerun with less processes if this happens.
If Jupyter crashes due to worker termination, DELETE ALL FILES IN pcsp2, and restart the entire notebook.
Proceed to the next step only when the files are generated without crashes.

3. Run `Generate_CSV.py` to generate `MDP_pred.csv`.
Note: Adjust the number of parallel processes according to the power of your computer. 
If Python crashes due to worker termination, DELETE ALL FILES IN result2, and restart the code run.
Proceed to the next step only when the files are generated without crashes.

4. Run `Betting_Simulation.py` to see the results.

## Additional Notes: 
There must be a pcsp2 folder for `Generate_PCSP.ipynb`. 
The pcsp2 folder should be empty when running `Generate_PCSP.ipynb`, there is no guarantees as to the behaviour of the program if pcsp2 is not empty.
After running `Generate_PCSP.ipynb`, the pcsp2 folder contains all the pcsp files generated by the Streak Model. 
The rest of the steps are simply to run `Betting_Simulation.py` using the pcsp files.

Similarly, the result2 folder must exist for `Generate_CSV.py`.
And similarly, result2 should be empty when running `Generate_CSV.py` for the same reasons.
If the programs crash when running, EMPTY THE FOLDERS BEFORE RUNNING THEM AGAIN.

`MatchedRecords.csv` is generated by Rank Model. 
We are using the same csv file so as to ensure our results are compatible for comparison.

`LH_LH.txt`, `LH_RH.txt`, `RH_LH.txt`, `RH_RH.txt` and `var.txt` are different from the original.

The `pcsp2.zip` file is the result of running `Generate_PCSP.ipynb`. Unlike the Rank Model's 203 files, this has less pcsp files because it rejects some files under
the grounds of not enough data.